<html>

	<head>
		<meta charset="utf-8">
		<title>Pubmed Query Editor 0.1</title>
		<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
		<script src="jquery.xml2json.js" type="text/javascript" language="javascript"></script>
		<script src="pubmed.js"></script>
		<script type="text/javascript" charset="utf-8" src="rangy-core.js"></script>
		<script type="text/javascript" charset="utf-8" src="editor.js"></script>
		<script type="text/javascript" language="javaScript" src="diff_match_patch_uncompressed.js"></script>
		<link rel="stylesheet" type="text/css" href="style.css">
		
	</head>
	<body spellcheck="false" >
		<a href="https://github.com/HansPinckaers/query-editor"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub"></a>
		
		<textarea id="rawquery" type="text" onpaste="searchPubmedAfterDelay()" onkeyup="return parse_pubmed_query(this.value, document.getElementById('query'), event)" onkeypress="return cancelReturn(event)" placeholder="Paste existing pubmed-query here. Or start a new one below!"></textarea>
		<div id="query" contenteditable="false" onkeyup="markup(event)" onkeypress="return insertBR(event)">
			Sorry, using the styled editor is not possible yet in your browser. <strong>Use Chrome, Safari or Firefox.</strong> <br/>You can always type in the upper textfield and see your styled query here.
		</div>
		<div id="testquery" style="display:none"></div>
		<p><em>press “return” to update pubmed results or click <a href="#!" onclick="refreshPubmed()">here to update.</a></em></p>
		<div id="pubmed">
			<p>Interpreted query <a href="#" target="_blank" id="pubmedlink"><span id="count"></span></a>: </p>
			<p><span id="queryTranslation"></span></p>
			<p>Differences with your query:</p>
			<p><div id="queryDiff"><p>Difference between your query and pubmed's translated query will be shown here.</p></div></p>
		</div>
		<div id="search_results"></div>
		<br/>
		<p><a href="#!" onclick='loadExample()'>Load example query</a></p>
		<p>
			Todo: 
			<ul>
				<li>Browser-related problems: not tested in IE.</li>
			</ul>
		</p>
		<p>
			Built by <a href="http://buildsucceeded.nl/">Hans Pinckaers</a> – 2013<br/>
			This project is <a href="https://github.com/HansPinckaers/query-editor">open-source</a>.
		</p>
	</body>

	<script>
		window.onload = function(){ 	
			var ua = navigator.userAgent, res;
			res = (ua.indexOf(' AppleWebKit/') !== -1 || ua.indexOf('Firefox/') !== -1);
			if(res)
			{
				document.getElementById('query').contentEditable = true;
				document.getElementById('query').innerHTML = "";
			}
		};
	</script>

</html>